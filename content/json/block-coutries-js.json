{"title":"Block guests by countries via JavaScript without API requests","date":"2019-09-27 18:18","date-update":"2021-03-29 01:06","tags":["javascript","gist"],"body":"<p>It’s a light solution for blocking guest based on client-side javascript</p>\n<ol>\n<li>Detect Browser’s Language</li>\n<li>Check detection results by blocked list</li>\n<li>Show or hide page content.</li>\n</ol>\n<p>```javascript\nwindow.onload = function () {</p>\n<p>  const navLang = navigator.language;\n  let showContent = true;</p>\n<p>  // Blocked coutries code list\n  const blocked_countries = [‘c1’, ‘c2’, ‘c3’];</p>\n<p>  // Show initially hidden styles\n  const hiddenStyles = <code>  .container {        display: block;   }</code>;</p>\n<p>  // Check List\n  blocked_countries.map(function (item) {\n    if (navLang.toLowerCase().includes(item)) {\n      showContent = false;\n    }\n  })</p>\n<p>  /* Function to add style element */\n  function addStyle(styles) {</p>\n<pre><code>/* Create style document */\nvar css = document.createElement(&#39;style&#39;);\ncss.type = &#39;text/css&#39;;\n\nif (css.styleSheet) {\n  css.styleSheet.cssText = styles;\n} else {\n  css.appendChild(document.createTextNode(styles));\n}\n\n/* Append style to the tag name */\ndocument.getElementsByTagName(&quot;head&quot;)[0].appendChild(css);\n</code></pre>\n<p>  }</p>\n<p>  /**\n   * Hide content\n   */\n  function removeElementsByClass(className){\n    var elements = document.getElementsByClassName(className);\n    while(elements.length &gt; 0){\n        elements[0].parentNode.removeChild(elements[0]);\n    }\n}</p>\n<p>  if (showContent) {\n    addStyle(hiddenStyles);\n  } else {\n    removeElementsByClass(‘container’);\n  }</p>\n<p>}</p>\n<p>```</p>\n","updatedAt":"2021-03-28T22:07:00.790Z"}